<html lang="en" >
<head>

<title>vbAccelerator - Cellular Automata - Crystal Model</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta name="AUTHOR" content="Steve McMahon" /><meta name="KEYWORDS" content=".NET, .NET Framework, C#, CSharp, VB, Visual Basic, VB5, VB6, Visual Basic, Active X, Controls, Components" /><meta name="DESCRIPTION" content="
A cellular automata are a class of mathematical systems which have been used widely
in the investigation of complexity.  An automaton is simple: an array of neighbouring
cells each have a finite number of possible states.  Each cell is then set to change its
state when an imaginary clock ticks according to a set of rules which relate the new
state to that of its neighbouring cells.  Even with very simple rules, surprisingly 
complicated results bloom during their iteration.
" /><link rel="stylesheet" href="..\..\..\..\..\res\screen.css" media="SCREEN" /><link rel="stylesheet" href="..\..\..\..\..\res\print.css" media="PRINT" /></head><body>
<table>
<tr class="adbar" bgcolor="#83726a"><td colspan="3">
<!-- TF 468x60 JScript HORIZ NoPop code -->
<script language=javascript><!--
document.write('<scr'+'ipt language=javascript src="http://a.tribalfusion.com/j.ad?site=VBAcceleratorcom&adSpace=ROS&size=468x60&type=horiz&pop=0&requestID='+((new Date()).getTime() % 2147483648) + Math.random()+'"></scr'+'ipt>');
//-->
</script>
<noscript>
   <a href="javascript:window.alert(&quot;http://a.tribalfusion.com/i.click?site=VBAcceleratorcom&adSpace=ROS&size=468x60&requestID=1423477941\nThis link was not retrieved.&quot;)" target=_blank>
   <img src="http://cdn5.tribalfusion.com/media/493786.gif" 
                  width=468 height=60 border=0 alt="Click Here"></a>
</noscript>
<!-- TF 468x60 JScript HORIZ NoPop code -->
</td></tr><tr class="navbar"><td><a href="..\..\..\..\..\index.html"><img width="125" height="25" src="..\..\..\..\..\res\vbaccelerator.png" alt="vbAccelerator Logo" /></a></td><td valign="bottom"><p class="nav"><a href="..\..\..\..\..\index.html">Home</a>&#160;.&#160;<a href="..\..\..\..\index.html">VB</a>&#160;.&#160;<a href="..\..\..\index.html">Code</a>&#160;.&#160;<a href="..\..\index.html">vbMedia</a>&#160;.&#160;<a href="..\index.html">Algorithmic Images</a>&#160;.&#160;Cellular Automata - Crystal Model</p></td><td></td></tr><tr class="navbar"><td colspan="3"><hr /></td></tr><tr valign="top"><td class="sidebar"><img src="..\..\..\..\..\res\download.png" width="125" height="21" alt="Downloads" /><p class="nav"><a href="cellular_automata_algorithm_demonstration.html"><img src="..\..\..\..\..\res\get.png" width="8" height="8" alt="Download Page" />Cellular Automata Algorithm Demonstration</a> (33K)</p><br /><br /><img src="..\..\..\..\..\res\information.png" width="125" height="21" alt="Information" /><p class="nav">Article:12678</p><p class="nav">&#160;&#160;<a href="..\..\..\..\..\..\linkto_asp\id=12678&type=article&title=cellular_20automata_20_2d_20crystal_20model.html">Link to this page</a></p><p class="nav">Applies To:</p><p class="nav">&#160;&#160;VB5</p><p class="nav">&#160;&#160;VB6</p><p class="nav">Author:</p><p class="nav">&#160;&#160;<a href="mailto:steve@vbaccelerator.com">Steve McMahon</a></p><br /><br /><img src="..\..\..\..\..\res\bugtrak.png" width="125" height="21" alt="BugTrak System" /><p class="nav">No logged bugs.</p><br /><br /><img src="..\..\..\..\..\res\updates.png" width="125" height="21" alt="Updates" /><p class="nav"><img src="..\..\..\..\..\res\update.png" width="8" height="8" alt="Update" />23 Aug 2003<br />First Posted</p><br /><br /><img src="..\..\..\..\..\res\related.png" width="125" height="21" alt="Related Items" /><p class="nav"><img src="..\..\..\..\..\res\rel.png" width="8" height="8" alt="Related Item" /><a href="..\..\dib_sections\256_colour_dibsection\article.html">256 Colour DIBSections </a></p><br /><br /><img src="..\..\..\..\..\res\search.png" width="125" height="21" alt="Search" />
<!-- Search Google -->
<form method="GET" action="http://www.google.com/custom">
<a href="javascript:window.alert(&quot;http://www.google.com/search\nThis link was not retrieved.&quot;)"><img src="..\..\..\..\..\..\..\www_google_com\logos\logo_40wht.gif" alt="Google" /></A><br />
<input type="text" name="q" size="31" maxlength="255" value="" class="search" /><br />
<input type="submit" name="sa" value="Search Google" class="search" />
<input type="hidden" name="cof" value="T:black;LW:330;ALC:990000;L:http://www.vbaccelerator.com/images/accl9.gif;LC:660000;LH:66;BGC:white;AH:left;VLC:999966;S:http://vbaccelerator.com/;GALT:999966;AWFID:67c7759ff27e5395;" />
<input type="hidden" name="domains" value="vbaccelerator.com" /><br />
<p class="nav"><input type="radio" name="sitesearch" value="" />Search WWW<br /></p>
<p class="nav"><input type="radio" name="sitesearch" value="vbaccelerator.com" checked="true" />vbAccelerator<br /></p>
</FORM>
<!-- Search Google -->
<br /><br />

<a href="..\..\..\..\..\the_site\newsite\article.html"><img src="..\..\..\..\..\res\newsite.png" width="125" height="129" alt="The New Site" /></a>
<br /><br />
</td><td width="100%" valign="top"><h1>Cellular Automata - Crystal Model</h1><p class="splash">Creating real-time animation effects using two-dimensional cellular automata</p><img src="cellular.png" width="565" height="94" alt="Five stages in the animation's evolution." /><p /><p>
A cellular automata are a class of mathematical systems which have been used widely
in the investigation of complexity.  An automaton is simple: an array of neighbouring
cells each have a finite number of possible states.  Each cell is then set to change its
state when an imaginary clock ticks according to a set of rules which relate the new
state to that of its neighbouring cells.  Even with very simple rules, surprisingly 
complicated results bloom during their iteration.
</p><h2>Cellular Automata Algorithm</h2><p>
To perform the algorithm, first a cellular space is needed.
The cellular space is a grid of <span class="code">width x height</span>
cells.  In order to make the space "infinite" the edges of the grid are assumed to
wrap-around onto each other, so cells on the extreme right margin are considered to be 
adjacent to those on the left, and cells at the bottom are adjacent to those at the top.
Each cell in the space is given a state number, <span class="code">s</span>.  The state number
can vary between 0 and the maximum state number, <span class="code">maxStates - 1</span>.
</p><p>
The cellular automata is then performed by running this rule for each cell:
</p><ul><li>Get the state <span class="code">s</span> for the current cell.</li><li>For each neighbour of the cell:
<ul><li>Get the neighbour cell state <span class="code">ns</span>.  If the neighbour's state is <span class="code">s - 1</span>,
then convert the neighbour to state <span class="code">s</span>.  This is known as "eating" the neighbour.
State values wrap-around, so a cell at state 0 eats cells with state <span class="code">maxStates - 1</span></li></ul></li></ul><p>
Which neighbour cells are considered can be varied to modify the result of the algorithm.
The standard neighbouring cells are the four immediately above, below, to the left and to the right,
however, the neighbours diagonally (or even further out) can also be considered.

Note that since the algorithm considers neighbours in all directions, the result needs
to be populated into a new copy of the space to avoid changing neighbours in the
previous version before the algorithm has completed.
</p><p>
To see the algorithm in effect, the space is initially populated with random data.  When it runs, 
three phases of activity occur.  In the first, droplets appear and start getting gradually bigger.
Then the droplets start taking on a hazy structure and continue to enlarge until they begin to meet each other.  
Finally, spirals appear and then rapidly take over the entire cellular space, settling into a stable
pattern.
</p><p>
To obtain a continuously changing pattern after stability has set in, the image can
either by dusted periodically with random data or the rules determining which cell is a 
neighbour can be changed.  

The result of dusting with random data depends on the intensity of the random data added.
At low intensities, spirals can subdivide or change shape.  At higher intensities, the entire
pattern can be reseeded.  Changing the rules setting which cells are neighbours has
kaliedoscopic effects on the result.  For example, try toggling all left and/or all right
neighbours.
</p><h2>Animating an Automata</h2><p>
Calculating the automata's rules for a single cycle can easily be achieved
quickly enough for animation in Visual Basic.  However, getting the result 
onto the screen quickly enough to provide a smooth animation is a different
matter.
</p><p>
The Windows DIB Section object is a bitmap in which the memory to hold
the bitmap is provided by the application which owns it.  By using 
the same memory to perform the automata calculations as displaying them
on screen, an animation of reasonable size can be shown in realtime.  
In this sample, I've chosen a <a href="..\..\dib_sections\256_colour_dibsection\article.html">256 
colour DIB Section</a> as the basis for the algorithm, since each pixel 
within the image is one byte long, which means the DIB
section data is effectively a 2 dimensional byte array, and a byte can
store all the possible states for a pixel.
</p><h2>Bringing It Together</h2><p>
The <span class="code">cCellularAutomata</span> implements this algorithm.
Properties are provided for setting the number of states, size of the
cellular space and which neighbours should be considered when running
the algorithm (specified using an x and y offset from the cell).
The colours of the result can also be specified through light and dark
colour properties. These are used to create a palette by linearly
interpolation for each of the states.
</p><p>&#160;</p><p>&#160;</p><p>&#160;</p><p>&#160;</p><p>&#160;</p><p>&#160;</p></td><td class="rightbar" valign="top" bgcolor="#C2BEB1">
<!-- No right bar content currently defined -->
</td></tr><tr class="footer"><td></td>
<td>
<p class="center">

<script type="text/javascript"><!--
google_ad_client = "pub-4690375644913255";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_channel ="";
google_ad_type = "text_image";
google_color_border = "336699";
google_color_bg = "FFFFFF";
google_color_link = "0000FF";
google_color_url = "008000";
google_color_text = "000000";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<noscript>
<A HREF="..\..\..\libraries\compression\index.html" ><IMG SRC="..\..\..\..\..\res\compress.png" ALT="Create and read Zip files and compress your data using Zlib" WIDTH=468 HEIGHT=60 BORDER=0></A>
</noscript>

</p>
</td>
<td></td>
</tr><tr><td colspan="3"><hr /></td></tr><tr class="footer"><td valign="top"><a href="..\..\..\..\..\index.html"><img width="125" height="25" src="..\..\..\..\..\res\vbaccelerator.png" alt="vbAccelerator Logo" /></a></td><td valign="bottom"><p class="nav"><a href="..\..\..\..\..\index.html">Home</a>&#160;.&#160;<a href="..\..\..\..\index.html">VB</a>&#160;.&#160;<a href="..\..\..\index.html">Code</a>&#160;.&#160;<a href="..\..\index.html">vbMedia</a>&#160;.&#160;<a href="..\index.html">Algorithmic Images</a>&#160;.&#160;Cellular Automata - Crystal Model</p><br /><p class="nav"><a href="..\..\..\..\..\the_site\copyright\article.html">Copyright</a> &#169; 2003 Steve McMahon <a href="mailto:steve@vbaccelerator.com">steve@vbaccelerator.com</a>.  All rights reserved.<br />Last Updated: 8 September 2003</p></td><td></td></tr></table>
</body></html>
